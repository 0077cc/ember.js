<!doctype html>

<html>
  <head>
    <script src="../tests/jquery-1.7.1.js"></script>
    <script src="../dist/ember.prod.js"></script>
  </head>
  <body>
    <script type="text/x-handlebars">
      <ul>{{#each App.wat}}<li>{{id}}</li>{{/each}}</ul>
    </script>

    <script>
      Ember.run(function() {
        App = Ember.Application.create();

        newContent = function() {
          var newContent = [], i;

          for (i = 0; i < 1000; i++) {
            newContent[newContent.length] = {
              id: Math.round(Math.random() * 1000),
              dateIn: new Date(),
              tag: "TAG-0" + i,
              speed: Math.random() * 100,
              length: Math.random() * 1000
            };
          }

          return newContent;
        };

        App.set('wat', newContent());
      });

      setTimeout(function() {
        console.profile('wat');
        Ember.run(function() {
          App.set('wat', newContent());
        });
        console.profileEnd('wat');
      }, 1000);
    </script>
  </body>
</html>

